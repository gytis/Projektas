from django import templatefrom django.core.exceptions import ObjectDoesNotExistfrom django.contrib.auth.models import Userfrom tinklas.friends.models import Friendregister = template.Library()@register.filterdef is_friend(user, friend):    try:        draugas = user.friend_set.get(draugas=friend.username)        return draugas.patvirtinta    except ObjectDoesNotExist:        return False@register.filterdef is_requested(user, friend):    try:        draugas = user.friend_set.get(draugas=friend.username)        return not draugas.patvirtinta    except ObjectDoesNotExist:        return False@register.filterdef siulytojas_pagal_id(friendship_id):    """        Funkcija draugystes siulytojo vartotojo varda        pagal pasiulytos draugystes id.        """    try:        friendship = Friend.objects.get(id=friendship_id)        user = User.objects.get(id=friendship.user_id)    except ObjectDoesNotExist:        return None    return user.username    