from django import templatefrom django.core.exceptions import ObjectDoesNotExistregister = template.Library()@register.filterdef is_friend(user, friend):    try:        draugas = user.friend_set.get(draugas=friend.username)        return draugas.patvirtinta    except ObjectDoesNotExist:        return False@register.filterdef is_requested(user, friend):    try:        draugas = user.friend_set.get(draugas=friend.username)        return not draugas.patvirtinta    except ObjectDoesNotExist:        return False@register.filterdef status(user, friend):    """        Patikrina draugystes statusa.                Statusa koduoja:            0 - draugas            1 - ne draugas, bet user laukia is jo atsakymo del draugystes            3 - jis pasiule user draugauti ir dabar laukia atsakymo            4 - niekas        """    try:        draugas = user.friend_set.get(draugas = friend.username)        user_pazistamas = True    except ObjectDoesNotExist:        user_pazistamas = False        if user_pazistamas:        if draugas.patvirtinta is True:            return 0        else:            return 1    else:        try:            friend.friend_set.get(draugas = user.username)        except ObjectDoesNotExist:            return 4        return 3